Search.setIndex({"docnames": ["index"], "filenames": ["index.rst"], "titles": ["texttunnel: Efficient text processing with GPT-3.5 and GPT-4"], "terms": {"thi": 0, "packag": 0, "offer": 0, "straightforward": 0, "interfac": 0, "integr": 0, "your": 0, "natur": 0, "languag": 0, "pipelin": 0, "It": 0, "i": 0, "optim": 0, "design": 0, "follow": 0, "scenario": 0, "suppos": 0, "you": 0, "possess": 0, "corpu": 0, "data": 0, "want": 0, "analyz": 0, "us": 0, "The": 0, "goal": 0, "perform": 0, "extract": 0, "nlp": 0, "task": 0, "classif": 0, "name": 0, "entiti": 0, "recognit": 0, "translat": 0, "summar": 0, "question": 0, "answer": 0, "sentiment": 0, "analysi": 0, "In": 0, "context": 0, "priorit": 0, "tidi": 0, "provid": 0, "streamlin": 0, "result": 0, "featur": 0, "output": 0, "schema": 0, "json": 0, "alongsid": 0, "openai": 0, "": 0, "function": 0, "call": 0, "defin": 0, "structur": 0, "input": 0, "valid": 0, "ensur": 0, "well": 0, "error": 0, "free": 0, "api": 0, "request": 0, "check": 0, "respons": 0, "from": 0, "against": 0, "expect": 0, "maintain": 0, "batch": 0, "support": 0, "bulk": 0, "pack": 0, "multipl": 0, "singl": 0, "asynchron": 0, "facilit": 0, "speedi": 0, "send": 0, "simultan": 0, "while": 0, "rate": 0, "limit": 0, "cost": 0, "estim": 0, "aim": 0, "transpar": 0, "befor": 0, "cach": 0, "aiohttp_client_cach": 0, "avoid": 0, "redund": 0, "reduc": 0, "previou": 0, "sqlite": 0, "mongodb": 0, "dynamodb": 0, "redi": 0, "backend": 0, "log": 0, "implement": 0, "python": 0, "nativ": 0, "framework": 0, "track": 0, "all": 0, "To": 0, "get": 0, "start": 0, "exampl": 0, "http": 0, "github": 0, "com": 0, "qagentur": 0, "tree": 0, "main": 0, "guid": 0, "also": 0, "resourc": 0, "platform": 0, "doc": 0, "class": 0, "messag": 0, "list": 0, "chatmessag": 0, "A": 0, "prompt": 0, "first": 0, "must": 0, "system": 0, "last": 0, "user": 0, "paramet": 0, "object": 0, "add_messag": 0, "none": 0, "add": 0, "end": 0, "count_token": 0, "str": 0, "turbo": 0, "0613": 0, "show_changing_model_warn": 0, "bool": 0, "fals": 0, "int": 0, "return": 0, "number": 0, "token": 0, "note": 0, "depend": 0, "ar": 0, "version": 0, "date": 0, "can": 0, "chang": 0, "over": 0, "time": 0, "caus": 0, "an": 0, "inaccur": 0, "count": 0, "default": 0, "whether": 0, "print": 0, "warn": 0, "mai": 0, "to_list": 0, "dict": 0, "dictionari": 0, "repres": 0, "format": 0, "chatcompletionrequest": 0, "param": 0, "complet": 0, "which": 0, "assist": 0, "should": 0, "respond": 0, "chatcomplet": 0, "definit": 0, "describ": 0, "see": 0, "detail": 0, "count_completion_token": 0, "assum": 0, "maximum": 0, "allow": 0, "max_token": 0, "count_prompt_token": 0, "includ": 0, "count_total_token": 0, "total": 0, "estimate_cost_usd": 0, "float": 0, "usd": 0, "upper": 0, "bound": 0, "sinc": 0, "fewer": 0, "than": 0, "get_hash": 0, "hash": 0, "kei": 0, "to_dict": 0, "ani": 0, "represent": 0, "onli": 0, "element": 0, "requir": 0, "flatten": 0, "top": 0, "level": 0, "role": 0, "content": 0, "one": 0, "build_binpacked_request": 0, "type": 0, "system_messag": 0, "max_tokens_per_request": 0, "max_texts_per_request": 0, "binpacking_funct": 0, "callabl": 0, "binpack_texts_in_ord": 0, "formatter_funct": 0, "format_texts_as_json": 0, "encoding_nam": 0, "cl100k_base": 0, "long_text_handl": 0, "build": 0, "If": 0, "possibl": 0, "combin": 0, "spent": 0, "overhead": 0, "like": 0, "pass": 0, "process_api_request": 0, "begin": 0, "each": 0, "binpack": 0, "90": 0, "size": 0, "10": 0, "buffer": 0, "make": 0, "sure": 0, "mistak": 0, "don": 0, "t": 0, "fail": 0, "mean": 0, "take": 0, "string": 0, "encod": 0, "rais": 0, "too": 0, "long": 0, "fit": 0, "build_request": 0, "is_valid_function_def": 0, "properti": 0, "custom": 0, "document": 0, "more": 0, "inform": 0, "context_s": 0, "input_token_price_per_1k": 0, "output_token_price_per_1k": 0, "tokens_per_minut": 0, "requests_per_minut": 0, "about": 0, "price": 0, "here": 0, "differ": 0, "between": 0, "account": 0, "them": 0, "e": 0, "g": 0, "per": 0, "1000": 0, "minut": 0, "overrid": 0, "valu": 0, "own": 0, "made": 0, "temperatur": 0, "0": 0, "presence_penalti": 0, "frequency_penalti": 0, "set": 0, "explain": 0, "refer": 0, "creat": 0, "gener": 0, "greater": 0, "least": 0, "enough": 0, "whole": 0, "what": 0, "sampl": 0, "2": 0, "higher": 0, "8": 0, "random": 0, "lower": 0, "focus": 0, "determinist": 0, "becaus": 0, "compliant": 0, "posit": 0, "penal": 0, "new": 0, "base": 0, "thei": 0, "appear": 0, "so": 0, "far": 0, "increas": 0, "likelihood": 0, "talk": 0, "topic": 0, "exist": 0, "frequenc": 0, "decreas": 0, "repeat": 0, "same": 0, "line": 0, "verbatim": 0, "reason": 0, "re": 0, "relev": 0, "case": 0, "gpt_4": 0, "8192": 0, "03": 0, "06": 0, "10000": 0, "200": 0, "gpt_4_0613": 0, "gpt_4_32k": 0, "32k": 0, "32768": 0, "12": 0, "20000": 0, "gpt_4_32k_0613": 0, "gpt_4_0314": 0, "0314": 0, "gpt_4_32k_0314": 0, "gpt_3_5_turbo": 0, "4096": 0, "0015": 0, "002": 0, "90000": 0, "3500": 0, "gpt_3_5_turbo_16k": 0, "16k": 0, "16384": 0, "003": 0, "004": 0, "180000": 0, "gpt_3_5_turbo_0613": 0, "gpt_3_5_turbo_16k_0613": 0, "gpt_3_5_turbo_0301": 0, "0301": 0, "9000": 0, "apirequest": 0, "task_id": 0, "token_consumpt": 0, "attempts_left": 0, "factori": 0, "store": 0, "other": 0, "metadata": 0, "contain": 0, "method": 0, "async": 0, "call_api": 0, "request_url": 0, "request_head": 0, "retry_queu": 0, "queue": 0, "output_filepath": 0, "path": 0, "status_track": 0, "statustrack": 0, "cachebackend": 0, "timeout_second": 0, "120": 0, "append": 0, "jsonl": 0, "file": 0, "url": 0, "header": 0, "need": 0, "retri": 0, "Will": 0, "popul": 0, "where": 0, "save": 0, "loop": 0, "progress": 0, "second": 0, "wait": 0, "out": 0, "num_tasks_start": 0, "num_tasks_in_progress": 0, "num_tasks_succeed": 0, "num_tasks_fail": 0, "num_rate_limit_error": 0, "num_api_error": 0, "num_other_error": 0, "time_of_last_rate_limit_error": 0, "script": 0, "instanc": 0, "append_to_jsonl": 0, "filenam": 0, "payload": 0, "aprocess_api_request": 0, "keep_fil": 0, "max_attempt": 0, "rate_limit_headroom_factor": 0, "75": 0, "api_kei": 0, "throttl": 0, "stai": 0, "under": 0, "stream": 0, "run": 0, "memori": 0, "giant": 0, "job": 0, "concurr": 0, "maxim": 0, "throughput": 0, "usag": 0, "up": 0, "miss": 0, "diagnos": 0, "problem": 0, "option": 0, "arrai": 0, "origin": 0, "plu": 0, "omit": 0, "temporari": 0, "keep": 0, "after": 0, "finish": 0, "addit": 0, "being": 0, "delet": 0, "true": 0, "compat": 0, "give": 0, "factor": 0, "multipli": 0, "guarante": 0, "attempt": 0, "read": 0, "environ": 0, "variabl": 0, "openai_api_kei": 0, "unless": 0, "serv": 0, "avail": 0, "how": 0, "configur": 0, "aiohttp": 0, "client": 0, "readthedoc": 0, "io": 0, "en": 0, "stabl": 0, "html": 0, "For": 0, "aiosqlit": 0, "instal": 0, "consist": 0, "two": 0, "check_cache_set": 0, "correctli": 0, "work": 0, "valueerror": 0, "fetch_api_kei": 0, "fetch": 0, "found": 0, "is_valid_respons": 0, "print_error": 0, "conform": 0, "parse_argu": 0, "argument": 0, "pars": 0, "length": 0, "parse_token_usag": 0, "prepare_output_filepath": 0, "wrapper": 0, "around": 0, "execut": 0, "within": 0, "asyncio": 0, "troubl": 0, "have": 0, "directli": 0, "jupyt": 0, "notebook": 0, "automat": 0, "import": 0, "nest_asyncio": 0, "appli": 0, "event": 0, "necessari": 0, "alreadi": 0, "background": 0, "control": 0, "coroutin": 0, "instead": 0, "run_request_loop": 0, "requests_queu": 0, "task_id_generator_funct": 0, "integ": 0, "1": 0, "yield": 0, "usage_to_cost": 0, "convert": 0, "retriev": 0, "max_tokens_per_bin": 0, "max_texts_per_bin": 0, "ha": 0, "less": 0, "equal": 0, "naiv": 0, "greedi": 0, "algorithm": 0, "order": 0, "empti": 0, "accept": 0, "join": 0, "space": 0, "formatt": 0, "when": 0, "bin": 0, "leav": 0, "some": 0, "room": 0, "rel": 0, "handl": 0, "longer": 0, "truncat": 0, "absolut": 0, "due": 0, "escap": 0, "charact": 0, "preserv": 0, "assign": 0, "id": 0, "help": 0, "distinguish": 0, "doesn": 0, "quot": 0, "map": 0, "easiest": 0, "edg": 0, "newlin": 0, "format_texts_with_spac": 0, "simpl": 0, "hash_dict": 0, "d": 0, "sha256": 0, "num_tokens_from_text": 0, "truncate_text_by_token": 0, "index": 0, "search": 0, "page": 0}, "objects": {"texttunnel": [[0, 0, 0, "-", "chat"], [0, 0, 0, "-", "models"], [0, 0, 0, "-", "processor"], [0, 0, 0, "-", "utils"]], "texttunnel.chat": [[0, 1, 1, "", "Chat"], [0, 1, 1, "", "ChatCompletionRequest"], [0, 1, 1, "", "ChatMessage"], [0, 3, 1, "", "build_binpacked_requests"], [0, 3, 1, "", "build_requests"], [0, 3, 1, "", "is_valid_function_def"]], "texttunnel.chat.Chat": [[0, 2, 1, "", "add_message"], [0, 2, 1, "", "count_tokens"], [0, 2, 1, "", "to_list"]], "texttunnel.chat.ChatCompletionRequest": [[0, 2, 1, "", "count_completion_tokens"], [0, 2, 1, "", "count_prompt_tokens"], [0, 2, 1, "", "count_total_tokens"], [0, 2, 1, "", "estimate_cost_usd"], [0, 2, 1, "", "get_hash"], [0, 2, 1, "", "to_dict"]], "texttunnel.chat.ChatMessage": [[0, 2, 1, "", "to_dict"]], "texttunnel.models": [[0, 4, 1, "", "GPT_3_5_TURBO"], [0, 4, 1, "", "GPT_3_5_TURBO_0301"], [0, 4, 1, "", "GPT_3_5_TURBO_0613"], [0, 4, 1, "", "GPT_3_5_TURBO_16K"], [0, 4, 1, "", "GPT_3_5_TURBO_16K_0613"], [0, 4, 1, "", "GPT_4"], [0, 4, 1, "", "GPT_4_0314"], [0, 4, 1, "", "GPT_4_0613"], [0, 4, 1, "", "GPT_4_32K"], [0, 4, 1, "", "GPT_4_32K_0314"], [0, 4, 1, "", "GPT_4_32K_0613"], [0, 1, 1, "", "Model"], [0, 1, 1, "", "Parameters"]], "texttunnel.models.Parameters": [[0, 2, 1, "", "to_dict"]], "texttunnel.processor": [[0, 1, 1, "", "APIRequest"], [0, 1, 1, "", "StatusTracker"], [0, 3, 1, "", "append_to_jsonl"], [0, 3, 1, "", "aprocess_api_requests"], [0, 3, 1, "", "check_cache_settings"], [0, 3, 1, "", "fetch_api_key"], [0, 3, 1, "", "is_valid_response"], [0, 3, 1, "", "parse_arguments"], [0, 3, 1, "", "parse_token_usage"], [0, 3, 1, "", "prepare_output_filepath"], [0, 3, 1, "", "process_api_requests"], [0, 3, 1, "", "run_request_loop"], [0, 3, 1, "", "task_id_generator_function"], [0, 3, 1, "", "usage_to_cost"]], "texttunnel.processor.APIRequest": [[0, 2, 1, "", "call_api"]], "texttunnel.utils": [[0, 3, 1, "", "binpack_texts_in_order"], [0, 3, 1, "", "format_texts_as_json"], [0, 3, 1, "", "format_texts_with_spaces"], [0, 3, 1, "", "hash_dict"], [0, 3, 1, "", "num_tokens_from_text"], [0, 3, 1, "", "truncate_text_by_tokens"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method", "3": "py:function", "4": "py:attribute"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"], "3": ["py", "function", "Python function"], "4": ["py", "attribute", "Python attribute"]}, "titleterms": {"texttunnel": 0, "effici": 0, "text": 0, "process": 0, "gpt": 0, "3": 0, "5": 0, "4": 0, "modul": 0, "chat": 0, "model": 0, "processor": 0, "util": 0, "indic": 0, "tabl": 0}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"texttunnel: Efficient text processing with GPT-3.5 and GPT-4": [[0, "texttunnel-efficient-text-processing-with-gpt-3-5-and-gpt-4"]], "Modules": [[0, "modules"]], "Chat Module": [[0, "module-texttunnel.chat"]], "Models Module": [[0, "module-texttunnel.models"]], "Processor Module": [[0, "module-texttunnel.processor"]], "Utils Module": [[0, "module-texttunnel.utils"]], "Indices and tables": [[0, "indices-and-tables"]]}, "indexentries": {"apirequest (class in texttunnel.processor)": [[0, "texttunnel.processor.APIRequest"]], "chat (class in texttunnel.chat)": [[0, "texttunnel.chat.Chat"]], "chatcompletionrequest (class in texttunnel.chat)": [[0, "texttunnel.chat.ChatCompletionRequest"]], "chatmessage (class in texttunnel.chat)": [[0, "texttunnel.chat.ChatMessage"]], "gpt_3_5_turbo (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_3_5_TURBO"]], "gpt_3_5_turbo_0301 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_3_5_TURBO_0301"]], "gpt_3_5_turbo_0613 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_3_5_TURBO_0613"]], "gpt_3_5_turbo_16k (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_3_5_TURBO_16K"]], "gpt_3_5_turbo_16k_0613 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_3_5_TURBO_16K_0613"]], "gpt_4 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4"]], "gpt_4_0314 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4_0314"]], "gpt_4_0613 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4_0613"]], "gpt_4_32k (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4_32K"]], "gpt_4_32k_0314 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4_32K_0314"]], "gpt_4_32k_0613 (texttunnel.models attribute)": [[0, "texttunnel.models.GPT_4_32K_0613"]], "model (class in texttunnel.models)": [[0, "texttunnel.models.Model"]], "parameters (class in texttunnel.models)": [[0, "texttunnel.models.Parameters"]], "statustracker (class in texttunnel.processor)": [[0, "texttunnel.processor.StatusTracker"]], "add_message() (texttunnel.chat.chat method)": [[0, "texttunnel.chat.Chat.add_message"]], "append_to_jsonl() (in module texttunnel.processor)": [[0, "texttunnel.processor.append_to_jsonl"]], "aprocess_api_requests() (in module texttunnel.processor)": [[0, "texttunnel.processor.aprocess_api_requests"]], "binpack_texts_in_order() (in module texttunnel.utils)": [[0, "texttunnel.utils.binpack_texts_in_order"]], "build_binpacked_requests() (in module texttunnel.chat)": [[0, "texttunnel.chat.build_binpacked_requests"]], "build_requests() (in module texttunnel.chat)": [[0, "texttunnel.chat.build_requests"]], "call_api() (texttunnel.processor.apirequest method)": [[0, "texttunnel.processor.APIRequest.call_api"]], "check_cache_settings() (in module texttunnel.processor)": [[0, "texttunnel.processor.check_cache_settings"]], "count_completion_tokens() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.count_completion_tokens"]], "count_prompt_tokens() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.count_prompt_tokens"]], "count_tokens() (texttunnel.chat.chat method)": [[0, "texttunnel.chat.Chat.count_tokens"]], "count_total_tokens() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.count_total_tokens"]], "estimate_cost_usd() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.estimate_cost_usd"]], "fetch_api_key() (in module texttunnel.processor)": [[0, "texttunnel.processor.fetch_api_key"]], "format_texts_as_json() (in module texttunnel.utils)": [[0, "texttunnel.utils.format_texts_as_json"]], "format_texts_with_spaces() (in module texttunnel.utils)": [[0, "texttunnel.utils.format_texts_with_spaces"]], "get_hash() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.get_hash"]], "hash_dict() (in module texttunnel.utils)": [[0, "texttunnel.utils.hash_dict"]], "is_valid_function_def() (in module texttunnel.chat)": [[0, "texttunnel.chat.is_valid_function_def"]], "is_valid_response() (in module texttunnel.processor)": [[0, "texttunnel.processor.is_valid_response"]], "module": [[0, "module-texttunnel.chat"], [0, "module-texttunnel.models"], [0, "module-texttunnel.processor"], [0, "module-texttunnel.utils"]], "num_tokens_from_text() (in module texttunnel.utils)": [[0, "texttunnel.utils.num_tokens_from_text"]], "parse_arguments() (in module texttunnel.processor)": [[0, "texttunnel.processor.parse_arguments"]], "parse_token_usage() (in module texttunnel.processor)": [[0, "texttunnel.processor.parse_token_usage"]], "prepare_output_filepath() (in module texttunnel.processor)": [[0, "texttunnel.processor.prepare_output_filepath"]], "process_api_requests() (in module texttunnel.processor)": [[0, "texttunnel.processor.process_api_requests"]], "run_request_loop() (in module texttunnel.processor)": [[0, "texttunnel.processor.run_request_loop"]], "task_id_generator_function() (in module texttunnel.processor)": [[0, "texttunnel.processor.task_id_generator_function"]], "texttunnel.chat": [[0, "module-texttunnel.chat"]], "texttunnel.models": [[0, "module-texttunnel.models"]], "texttunnel.processor": [[0, "module-texttunnel.processor"]], "texttunnel.utils": [[0, "module-texttunnel.utils"]], "to_dict() (texttunnel.chat.chatcompletionrequest method)": [[0, "texttunnel.chat.ChatCompletionRequest.to_dict"]], "to_dict() (texttunnel.chat.chatmessage method)": [[0, "texttunnel.chat.ChatMessage.to_dict"]], "to_dict() (texttunnel.models.parameters method)": [[0, "texttunnel.models.Parameters.to_dict"]], "to_list() (texttunnel.chat.chat method)": [[0, "texttunnel.chat.Chat.to_list"]], "truncate_text_by_tokens() (in module texttunnel.utils)": [[0, "texttunnel.utils.truncate_text_by_tokens"]], "usage_to_cost() (in module texttunnel.processor)": [[0, "texttunnel.processor.usage_to_cost"]]}})